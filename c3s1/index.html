<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Intro to Ruby 1</title>

  

  <meta name="viewport" content="width=device-width">
  <!-- Twitter bootstrap basic styles -->
  <link rel="stylesheet" href="../bootstrap/css/bootstrap.css">
  <link rel="stylesheet" href="../bootstrap/css/bootstrap-responsive.css">



  <!-- syntax highlighting CSS -->
  <link rel="stylesheet" href="../css/syntax.css">
  <!-- Google webfont link -->
<link href='http://fonts.googleapis.com/css?family=Arvo:700|Titillium+Web:900' rel='stylesheet' type='text/css'>


  <!-- Custom CSS -->
  <link rel="stylesheet" href="../css/main.css">

  <script src="../assets/jquery-1.10.0.js"></script>

  <script type="text/javascript" src='../bootstrap/js/bootstrap.js'></script>
  <script type="text/javascript" src='../assets/custom.js'></script>

<body class="">

  <div class="container">

    <div class="page-header">
  <h1>Intro to Ruby 1 <small>The basics</small></h1>
</div>

<div class="tabbable tabs-left">
<ul class="nav nav-tabs" id="myTab">
	
		
		<li class="active"><a href="#1_introducing_ruby.md" data-toggle="tab">Introducing ruby </a></li>
		
	
		
		<li><a href="#2_exercise_summary.md" data-toggle="tab">Exercise summary </a></li>
		
	
		
		<li><a href="#3_variables.md" data-toggle="tab">Names & Variables </a></li>
		
	
		
		<li><a href="#4_exercise_summary.md" data-toggle="tab">Exercise summary </a></li>
		
	
		
		<li><a href="#5_sinatra.md" data-toggle="tab">Introducing sinatra </a></li>
		
	
		
		<li><a href="#6_basic_app.md" data-toggle="tab">Basic app </a></li>
		
	
		
		<li><a href="#7_homework.md" data-toggle="tab">Homework </a></li>
		
	
</ul>

<div class="tab-content">

	
	<div class="tab-pane active" id="1_introducing_ruby.md">
	

		<h2>Introducing ruby</h2>
		<p>Ruby is a programming language. It is different to HTML and CSS, which are just <em>markup</em> languages: in ruby you can do calculations. </p>

<p>Ruby is an incredibly powerful and flexible language. It is a modern language - created in the 1990s by Yukihiro Matsumoto (Matz). A large part of his design philosophy is centered around optimizing for developer happiness - making a language that is a pleasure to program in. If you haven’t already programmed in another language, you might not fully appreciate this, but - take it from someone who has - ruby is awesome!</p>

<p>Ruby really shot to fame around 2005, due to the Ruby on Rails web framework. Ruby on Rails is a free, open-source web programming toolkit, which makes it really quick and easy to build web applications. Many top startups and sites (e.g. yellowpages.com, airbnb.com, github.com, gocardless.com, grouper.com) are built with ruby on rails - its rapid prototyping capabilities make it one of the go-to choices, especially for startups. The first version of Twitter was built in Ruby on Rails!</p>

<p>In this course, we’ll be leaning the basics of ruby, in a web development context. We won’t be using ruby on rails, instead focussing on a simpler framework (called sinatra), which will give you a better understanding of what’s going on behind the scenes and allow you to be far more productive with rails, when you come onto it later.</p>

<h2 id="iteractive-ruby-irb">Iteractive ruby: irb</h2>

<p>Ruby is an <em>interpreted language</em>. One of the great things about an interpreted language is that it’s often possible to interact with the interpreter in real time. When you installed ruby, you also got a program called <code>irb</code> (interactive ruby), which allows you to interpret ruby on the command line. To start it you just type <code>irb</code> on the command line.</p>

<div class="highlight"><pre><code class="language-irb" data-lang="irb"><span class="go">001: &gt; 2 + 2</span>
<span class="go"> =&gt; 4 </span>
<span class="go">002: &gt;</span></code></pre></div>

<p><code>2 + 2</code> is a ruby <em>expression</em>. The <code>=&gt;</code> symbol tells you what <em>value</em> this expression evaluates to. The interpreter has converts expressions to values.</p>

<p>If you just type the value <code>4</code> into irb, you will see that it will return <code>4</code> to you. </p>

<div class="highlight"><pre><code class="language-irb" data-lang="irb"><span class="go">001: &gt; 4</span>
<span class="go"> =&gt; 4 </span>
<span class="go">002: &gt;</span></code></pre></div>

<p>Like all values in ruby, <code>4</code> is also an expression - it just evaluates to itself.</p>

<p>So far you’ve only seen values that are numbers. We’ll come across some other values soon.</p>

<h2 id="comments">Comments</h2>

<p>In ruby, any part of a line that comes after a <code>#</code> is ignored. This is useful when you’re writing complicated programs, as it allows you to write human-readable comments to document your code.</p>

<div class="highlight"><pre><code class="language-irb" data-lang="irb"><span class="go">001: &gt; 2 + 2  # add together 2 and 2</span>
<span class="go"> =&gt; 4 </span>
<span class="go">002: &gt; # this does nothing</span>
<span class="go">003: &gt;</span></code></pre></div>

<p>Notice how in line <code>002</code> above there is no <code>=&gt;</code> and no return value; comments don’t evaluate to anything - they’re completely ignored.</p>

<div class="exercise alert alert-info">
  <p><strong>Task:</strong> 
1. Pick a partner.
2. Open <code>irb</code> on one of your laptops.
3. For each of the following ruby expressions, try to agree what value you think they evaluate to. Check if you’re right in irb.</p>

  <div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="mi">1</span> <span class="o">+</span> <span class="mi">2</span>

<span class="mi">5</span> <span class="o">-</span> <span class="mi">6</span>

<span class="mi">8</span> <span class="o">*</span> <span class="mi">9</span>

<span class="mi">6</span> <span class="o">/</span> <span class="mi">2</span>

<span class="mi">5</span> <span class="o">/</span> <span class="mi">2</span>

<span class="mi">5</span><span class="o">.</span><span class="mi">0</span> <span class="o">/</span> <span class="mi">2</span>

<span class="mi">5</span> <span class="o">%</span> <span class="mi">2</span>

<span class="mi">2</span><span class="o">.</span><span class="n">even?</span>

<span class="mi">3</span><span class="o">.</span><span class="n">even?</span>

<span class="s2">&quot;hello &quot;</span> <span class="o">+</span> <span class="s2">&quot;world&quot;</span>

<span class="s2">&quot;Bob&quot;</span> <span class="o">*</span> <span class="mi">3</span>

<span class="s2">&quot;Bob&quot;</span> <span class="o">+</span> <span class="mi">3</span>

<span class="s2">&quot;don&#39;t shout&quot;</span><span class="o">.</span><span class="n">upcase</span>

<span class="s2">&quot;edam&quot;</span><span class="o">.</span><span class="n">reverse</span></code></pre></div>

</div>

<div class="exercise alert alert-info">
  <p><strong>Task:</strong> 
4. (Challenge for pairs who finish early). What does the operation <code>^</code> do? E.g.</p>

  <pre><code>    1 ^ 2

    2 ^ 5

    4 ^ 5
</code></pre>

</div>

	</div>

	
	<div class="tab-pane " id="2_exercise_summary.md">
	

		<h2>Exercise summary</h2>
		<p>Before we will move on to variables, we’ll quickly look at a few of the things that you found out in the previous exercise:</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="o">&gt;</span> <span class="mi">6</span> <span class="o">/</span> <span class="mi">2</span>
<span class="o">=&gt;</span> <span class="mi">3</span>
<span class="o">&gt;</span> <span class="mi">5</span> <span class="o">/</span> <span class="mi">2</span>
<span class="o">=&gt;</span> <span class="mi">2</span>
<span class="o">&gt;</span> <span class="mi">5</span><span class="o">.</span><span class="mi">0</span> <span class="o">/</span> <span class="mi">2</span>
<span class="o">=&gt;</span> <span class="mi">2</span><span class="o">.</span><span class="mi">5</span>
<span class="o">&gt;</span> <span class="mi">5</span> <span class="o">%</span> <span class="mi">2</span>
<span class="o">=&gt;</span> <span class="mi">1</span></code></pre></div>

<p>If you give ruby integers (whole numbers), it will do <em>integer division</em>. For example, <code>5 / 2</code> gives <code>2</code> as it is the largest whole number of times you can remove <code>2</code> from <code>5</code>. The partner to integer division is the remainder <code>5 % 2</code>, giving <code>1</code>. Together these two operations tell you that <code>2</code> goes twice into <code>5</code> with remainder <code>1</code>. If you give ruby decimals it will do normal division. <strong>Everyone gets caught out by this at some point. You have been warned!</strong></p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="o">&gt;</span> <span class="mi">2</span><span class="o">.</span><span class="n">even?</span>
<span class="o">=&gt;</span> <span class="kp">true</span></code></pre></div>

<p>The line above is actually pretty special. We’ve just asked the value <code>2</code> a question and it’s responded. In programming terms, this works because <code>2</code> is an <em>object</em> - something that contains both data and <em>methods</em> that can query/manipulate the data. In this case, <code>even?</code> is the method that we called. In ruby <strong>all values are objects</strong>. This is unusual and isn’t true in many other programming languages. We’ll leave it at that for the time being, but you’ll learn more about this later.</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="o">&gt;</span> <span class="s2">&quot;hello &quot;</span> <span class="o">+</span> <span class="s2">&quot;world&quot;</span>
<span class="o">=&gt;</span> <span class="s2">&quot;hello world&quot;</span>
<span class="o">&gt;</span> <span class="s2">&quot;don&#39;t shout&quot;</span><span class="o">.</span><span class="n">upcase</span>
<span class="o">=&gt;</span> <span class="s2">&quot;DON&#39;T SHOUT&quot;</span></code></pre></div>

<p>Here you met another third type of value: <code>"hello"</code> is a string. As you see here, you can add strings together. Like all ruby values, strings are also objects and therefore have methods. Here we used the <code>upcase</code> method, to change the string into uppercase. You can find out more about the methods that strings have in the <a href="http://ruby-doc.org/core-2.1.0/String.html">ruby docs</a>.</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="o">&gt;</span> <span class="s2">&quot;Bob&quot;</span> <span class="o">+</span> <span class="mi">3</span>
<span class="ss">TypeError</span><span class="p">:</span> <span class="n">can</span><span class="s1">&#39;t convert Fixnum into String</span>
<span class="s1">from (irb):1:in `+&#39;</span></code></pre></div>

<p>Oh dear! Turns out that you can’t add a string to an integer. Have another read of the message that irb gave you. Can you figure out what it is saying? When something goes wrong, ruby tries to be as helpful as it can. Learning to interpret the errors that ruby gives is an important part of learning to become a programmer.</p>

<p><small>The ^ operator in the optional challenge is <a href="http://en.wikipedia.org/wiki/Bitwise_operation#XOR">bitwise exclusive or</a>.</small></p>


	</div>

	
	<div class="tab-pane " id="3_variables.md">
	

		<h2>Names & Variables</h2>
		<p>So far we’ve used irb as a clever calculator, by working with values directly. Programming becomes a lot more powerful when you’re able to give values <strong>names</strong>.</p>

<p>A <strong>name</strong> is just something that you can use to refer to a value. In ruby you create a name by using the assignment operator, <code>=</code>.</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">age</span> <span class="o">=</span> <span class="mi">5</span></code></pre></div>

<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="153.012px" height="44.94px" viewbox="0 0 153.012 44.94" enable-background="new 0 0 153.012 44.94" xml:space="preserve">
<rect x="10.783" y="9" fill="none" stroke="#939598" stroke-width="3" stroke-miterlimit="10" width="54" height="27" />
<text transform="matrix(1 0 0 1 27.7832 26)" font-family="'MyriadPro-Regular'" font-size="12">age</text>
<circle fill="none" stroke="#F7941E" stroke-width="3" stroke-miterlimit="10" cx="123.283" cy="22.5" r="13.5" />
<text transform="matrix(1 0 0 1 119.7832 27)" font-family="'MyriadPro-Regular'" font-size="12">5</text>
<g>
  <g>
    <line fill="none" stroke="#000000" stroke-miterlimit="10" x1="64.783" y1="23" x2="102.723" y2="23" />
    <g>
      <polygon points="109.783,23 99.834,27.065 102.195,23 99.834,18.936      " />
    </g>
  </g>
</g>
</svg>

<p>You can change the value associated with a name at any point. It doesn’t even have to be the same type of value as the first value assigned to the name. Here we change the value associated with <code>age</code> to a string:</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">age</span> <span class="o">=</span> <span class="s2">&quot;almost three&quot;</span></code></pre></div>

<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="215.663px" height="44.94px" viewbox="0 0 215.663 44.94" enable-background="new 0 0 215.663 44.94" xml:space="preserve">
<rect x="10.783" y="9" fill="none" stroke="#939598" stroke-width="3" stroke-miterlimit="10" width="54" height="27" />
<text transform="matrix(1 0 0 1 27.7832 26)" font-family="'MyriadPro-Regular'" font-size="12">age</text>
<text transform="matrix(1 0 0 1 121.7832 27)" font-family="'MyriadPro-Regular'" font-size="12">“almost three”</text>
<g>
  <g>
    <line fill="none" stroke="#000000" stroke-miterlimit="10" x1="64.783" y1="23" x2="102.723" y2="23" />
    <g>
      <polygon points="109.783,23 99.834,27.065 102.195,23 99.834,18.936      " />
    </g>
  </g>
</g>
<path fill="none" stroke="#F7941E" stroke-width="3" stroke-miterlimit="10" d="M208.434,24c0,6.627-4.636,12-10.356,12h-77.938
  c-5.72,0-10.356-5.373-10.356-12v-3c0-6.627,4.636-12,10.356-12h77.938c5.72,0,10.356,5.373,10.356,12V24z" />
</svg>

<h2 id="types-of-name">Types of name</h2>

<p>There are various different types of name in ruby:</p>

<ul>
  <li><strong>local variables</strong> e.g. <code>age</code>: Local variables begin with a lower-case letter. They’re all we’ll be using for now.</li>
  <li><strong>constants</strong> e.g. <code>PI</code>: Any name that starts with a capital letter is deemed to be a constant. Ruby will complain if you try to change its value at a later date.</li>
  <li><strong>instance variables</strong> e.g. <code>@name</code>: Instance variables start with a single <code>@</code> sign. They’re used to store values inside objects. More later.</li>
  <li><strong>class variables</strong> e.g. <code>@@count</code>: Class variables start with two <code>@@</code> signs. They’re used to store values relevant to a set of objects. More on this later too.</li>
  <li><strong>global variables</strong> e.g. <code>$last_error</code>: Global variables start with a <code>$</code> sign. They’re available anywhere in your program. Relying on global variables is normally a bad idea.</li>
</ul>

<p>For the moment, we will just be using local variables. The important thing to take from the above tables is that <strong>local variables must start with a lower-case letter</strong>.</p>

<h2 id="string-interpolation">String interpolation</h2>

<p>String interpolation is a way of taking a variable and putting it inside a string.</p>

<p>To write a string in ruby you can either use <code>'</code> or <code>"</code>.</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">string1</span> <span class="o">=</span> <span class="s1">&#39;hello&#39;</span>
<span class="n">string2</span> <span class="o">=</span> <span class="s2">&quot;hello&quot;</span></code></pre></div>

<p>In the code above, string1 and string2 are exactly the same. The difference between <code>'</code> and <code>"</code> is that <code>"</code> allows you to do <strong>string interpolation</strong>:</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">age</span> <span class="o">=</span> <span class="mi">5</span>
<span class="n">age_description</span> <span class="o">=</span> <span class="s2">&quot;My age is </span><span class="si">#{</span><span class="n">age</span><span class="si">}</span><span class="s2">.&quot;</span>
<span class="o">=&gt;</span> <span class="s2">&quot;My age is 5.&quot;</span></code></pre></div>

<p>Any ruby expression inside the <code>#{ }</code> will be evaluated and inserted into the string. Here we gave it the variable <code>age</code>, which points to the value <code>5</code>. As <code>5</code> is a value it evaluates to itself, so 5 is inserted into the string.</p>

<div class="exercise alert alert-info">
  <p><strong>Task:</strong> 
1. With your partner, decide what each of the following instructions will do. Test to see if you’re right in irb.</p>

  <div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>

<span class="n">a</span>

<span class="n">a</span><span class="o">+</span><span class="mi">1</span>

<span class="n">a</span>

<span class="n">a</span> <span class="o">=</span> <span class="n">a</span> <span class="o">+</span> <span class="mi">1</span>

<span class="n">a</span>

<span class="n">b</span> <span class="o">=</span> <span class="s2">&quot;hello&quot;</span>

<span class="n">b</span>

<span class="n">c</span> <span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="n">capitalize</span>

<span class="n">b</span>

<span class="n">c</span>

<span class="n">d</span> <span class="o">=</span> <span class="s2">&quot;hello&quot;</span>

<span class="n">e</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">capitalize!</span>

<span class="n">d</span>

<span class="n">e</span>

<span class="nb">name</span> <span class="o">=</span> <span class="s2">&quot;Dave&quot;</span>

<span class="n">f</span> <span class="o">=</span> <span class="s2">&quot;Hello </span><span class="si">#{</span><span class="nb">name</span><span class="si">}</span><span class="s2">! &quot;</span>

<span class="n">f</span>

<span class="nb">name</span> <span class="o">=</span> <span class="s2">&quot;Sarah&quot;</span>

<span class="n">f</span>

<span class="n">f</span> <span class="o">*</span> <span class="mi">5</span></code></pre></div>

</div>
<div class="exercise alert alert-info">
  <p><strong>Task:</strong> 
2. (Extension for pairs who finish early.)[Note: this exercise has a lot more to do with maths than programming. If you don’t get it don’t worry!]</p>

  <pre><code>Consider the expression
```
x = (2 + 5*x - x**2)/5
```
1. Let `x = 1.1`
2. Write `x = (2 + 5*x - x**2)/5` and then evaluate this multiple times (using the up arrow in irb)
3. What happens? Can you explain why?
4. Let `x = 1` and do the same thing. What happens and why? 
</code></pre>

</div>

	</div>

	
	<div class="tab-pane " id="4_exercise_summary.md">
	

		<h2>Exercise summary</h2>
		
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="o">&gt;</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">1</span>
<span class="o">=&gt;</span> <span class="mi">1</span>
<span class="o">&gt;</span> <span class="n">x</span> <span class="o">=</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">1</span>
<span class="o">=&gt;</span> <span class="mi">2</span></code></pre></div>

<p>This might seem really obvious, but it’s worth pointing out: <code>=</code> is an assignment operator; it means ‘set name on the left equal to the value on the right’. It isn’t the same equals as you see in maths! In maths <code>x = x + 1</code> doesn’t really make sense -it’s an equation with no (finite) solutions. In ruby <code>x = x + 1</code> makes perfect sense - just set <code>x</code> to be one more than it was before.</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">b</span> <span class="o">=</span> <span class="s2">&quot;hello&quot;</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="n">capitalize</span>

<span class="n">b</span> <span class="c1">#=&gt; &quot;hello&quot;</span>
<span class="n">c</span> <span class="c1">#=&gt; &quot;Hello&quot;</span>

<span class="n">d</span> <span class="o">=</span> <span class="s2">&quot;hello&quot;</span> 
<span class="n">e</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">capitalize!</span>

<span class="n">d</span> <span class="c1">#=&gt; &quot;Hello&quot;</span>
<span class="n">e</span> <span class="c1">#=&gt; &quot;Hello&quot;</span></code></pre></div>

<p>This example is pretty important. In the first case <code>capitalize</code> gives back “HELLO”, but leaves the original string untouched. </p>

<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="153.667px" height="96.666px" viewbox="0 0 153.667 96.666" enable-background="new 0 0 153.667 96.666" xml:space="preserve">
<rect x="8.667" y="9" fill="none" stroke="#939598" stroke-width="3" stroke-miterlimit="10" width="27" height="27" />
<text transform="matrix(1 0 0 1 19.1484 26)" font-family="'MyriadPro-Regular'" font-size="12">b</text>
<text transform="matrix(1 0 0 1 92.667 27)" font-family="'MyriadPro-Regular'" font-size="12">“hello”</text>
<g>
  <g>
    <line fill="none" stroke="#000000" stroke-miterlimit="10" x1="35.667" y1="23" x2="73.606" y2="23" />
    <g>
      <polygon points="80.667,23 70.718,27.065 73.079,23 70.718,18.936      " />
    </g>
  </g>
</g>
<rect x="6.89" y="56.807" fill="none" stroke="#939598" stroke-width="3" stroke-miterlimit="10" width="27" height="27" />
<text transform="matrix(1 0 0 1 19.1484 73.8071)" font-family="'MyriadPro-Regular'" font-size="12">c</text>
<text transform="matrix(1 0 0 1 90.8896 74.8071)" font-family="'MyriadPro-Regular'" font-size="12">“Hello”</text>
<g>
  <g>
    <line fill="none" stroke="#000000" stroke-miterlimit="10" x1="33.89" y1="70.807" x2="71.829" y2="70.807" />
    <g>
      <polygon points="78.89,70.807 68.94,74.873 71.301,70.807 68.94,66.743       " />
    </g>
  </g>
</g>
<path fill="none" stroke="#F7941E" stroke-width="3" stroke-miterlimit="10" d="M136.333,24c0,6.627-5.373,12-12,12H94.667
  c-6.627,0-12-5.373-12-12v-2.5c0-6.627,5.373-12,12-12h29.667c6.627,0,12,5.373,12,12V24z" />
<path fill="none" stroke="#F7941E" stroke-width="3" stroke-miterlimit="10" d="M143.667,72c0,6.627-5.373,12-12,12h-39
  c-6.627,0-12-5.373-12-12v-3c0-6.627,5.373-12,12-12h39c6.627,0,12,5.373,12,12V72z" />
</svg>

<p>In the second case, we use the in-place version of <code>captialize!</code>. It changes the actual string that <code>d</code> is pointing to, and sets <code>e</code> to point there too. In ruby, methods often come in two flavours like this, with the <code>!</code> version modifying the original object in place. You could also try out <code>reverse/reverse!</code> and <code>upcase/upcase!</code>.</p>

<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="153.667px" height="96.666px" viewbox="0 0 153.667 96.666" enable-background="new 0 0 153.667 96.666" xml:space="preserve">
<g>
  <g>
    <line fill="none" stroke="#000000" stroke-miterlimit="10" x1="35.667" y1="23" x2="72.718" y2="23" />
    <g>
      <polygon points="79.778,23 69.829,27.065 72.19,23 69.829,18.936       " />
    </g>
  </g>
</g>
<g>
  <g>
    <line fill="none" stroke="#000000" stroke-miterlimit="10" x1="33.89" y1="70.807" x2="76.081" y2="36.457" />
    <g>
      <polygon points="81.556,31.999 76.407,41.433 75.671,36.79 71.274,35.129       " />
    </g>
  </g>
</g>
<rect x="8.667" y="9" fill="none" stroke="#939598" stroke-width="3" stroke-miterlimit="10" width="27" height="27" />
<text transform="matrix(1 0 0 1 19.1484 26)" font-family="'MyriadPro-Regular'" font-size="12">d</text>
<rect x="6.89" y="56.807" fill="none" stroke="#939598" stroke-width="3" stroke-miterlimit="10" width="27" height="27" />
<text transform="matrix(1 0 0 1 19.1484 73.8071)" font-family="'MyriadPro-Regular'" font-size="12">e</text>
<text transform="matrix(1 0 0 1 91.7783 26.8066)" font-family="'MyriadPro-Regular'" font-size="12">“Hello”</text>
<path fill="none" stroke="#F7941E" stroke-width="3" stroke-miterlimit="10" d="M144.556,24c0,6.627-5.373,12-12,12h-39
  c-6.627,0-12-5.373-12-12v-3c0-6.627,5.373-12,12-12h39c6.627,0,12,5.373,12,12V24z" />
</svg>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="o">&gt;</span> <span class="nb">name</span> <span class="o">=</span> <span class="s2">&quot;Dave&quot;</span>
<span class="o">=&gt;</span> <span class="s2">&quot;Dave&quot;</span>
<span class="o">&gt;</span> <span class="n">f</span> <span class="o">=</span> <span class="s2">&quot;Hello </span><span class="si">#{</span><span class="nb">name</span><span class="si">}</span><span class="s2">! &quot;</span>
<span class="o">=&gt;</span> <span class="s2">&quot;Hello Dave! &quot;</span>
<span class="o">&gt;</span> <span class="n">f</span>
<span class="o">=&gt;</span> <span class="s2">&quot;Hello Dave! &quot;</span>
<span class="o">&gt;</span> <span class="nb">name</span> <span class="o">=</span> <span class="s2">&quot;Sarah&quot;</span>
<span class="o">=&gt;</span> <span class="s2">&quot;Sarah&quot;</span>
<span class="o">&gt;</span> <span class="n">f</span>
<span class="o">=&gt;</span> <span class="s2">&quot;Hello Dave! &quot;</span></code></pre></div>

<p>The above shows that <em>string interpolation happens when you write it down</em>. When you first write <code>f = "Hello #{name}! "</code> ruby immediately looks up <code>name</code> and bakes it straight into the string. Setting <code>name</code> to something differeny later on, won’t change this.</p>

<p><small>In the extra challenge, the expression gave an iterative approximation to sqrt(2). You can tell by rearranging and solving the equation, that any fixed point must be a sqrt of 2. In the final part, by giving it <code>x=1</code> you forced ruby to do integer arithmetic. If you’re into that sort of thing, you might like to try and find the fixed points in this case!</small></p>

	</div>

	
	<div class="tab-pane " id="5_sinatra.md">
	

		<h2>Introducing sinatra</h2>
		<p>Sinatra is a lightweight web framework written in ruby.</p>

<h3 id="getting-sinatra">Getting sinatra</h3>

<p>You can install sinatra on your laptop using <a href="http://rubygems.org/">rubygems</a> - ruby’s excellent package manager. When people write their own ruby libraries, they usually release them as a gem, so that others can quickly and easily install them. Sinatra is one of these libraries. To install it do:</p>

<pre><code>$ gem install sinatra
</code></pre>

<p>at the command line. We will also need a few other rubygems, so install these too:</p>

<pre><code>$ gem install rack-test
</code></pre>

<div class="exercise alert alert-info">
  <p><strong>Task:</strong> 
1. Install sinatra: at the command line run</p>

  <pre><code>    $ gem install sinatra
    $ gem install rack-test
</code></pre>

  <ol>
    <li>
      <p>Download the code for the session:</p>

      <pre><code> $ git clone https://github.com/code61/sinatra_c3s1.git
</code></pre>
    </li>
  </ol>

</div>

<h2 id="a-simple-ruby-application">A simple ruby application</h2>

<p>So far, we’ve only used ruby in <code>irb</code>. If we’re going to write ruby applications, we need to go beyond this. In this section, we’re going to have some code written in a file (a <code>.rb</code> file) and we’re going to run the whole file through the interpreter, using the <code>ruby</code> command.</p>

<p>We’re now going to look at a very simple ruby web application that uses sinatra.</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="c1"># in app.rb:</span>

<span class="nb">require</span> <span class="s1">&#39;sinatra&#39;</span>

<span class="n">get</span> <span class="s1">&#39;/&#39;</span> <span class="k">do</span>
    <span class="s2">&quot;hello&quot;</span>
<span class="k">end</span></code></pre></div>

<p>This file is very simple. The first line imports the <code>sinatra</code> library - this is what does most of the work here. The next bit tells sinatra how to respond to a certain type of request. In particular it says that if it receives a <code>GET</code> request to the root url it should send back the text “hello”.</p>

<p>To run this app you need to run the <code>app.rb</code> file using ruby.</p>

<pre><code>$ cd sinatra_c3s1
$ ruby app.rb
== Sinatra/1.3.3 has taken the stage on 4567 for development with backup from Thin
&gt;&gt; Thin web server (v1.3.1 codename Triple Espresso)
&gt;&gt; Maximum connections set to 1024
&gt;&gt; Listening on 0.0.0.0:4567, CTRL+C to stop
</code></pre>

<p>Sinatra has started a webserver on your computer, which you can view in your browser. It will be displayed at the IP address <code>0.0.0.0</code> on port <code>4567</code>. <code>0.0.0.0</code> always points to the machine you are currently using. Another way of saying this is to use the word <code>localhost</code>. You will be able to view the site by typing one of the following into your browser address bar:</p>

<ul>
  <li><code>0.0.0.0:4567</code></li>
  <li><code>localhost:4567</code></li>
</ul>

<h2 id="changing-the-app">Changing the app</h2>

<p>What just happened involved quite a lot of magic. Because of the line <code>require sinatra</code>, when you ran the file through ruby, the following happened:</p>

<ol>
  <li>Sinatra started a webserver on your computer.</li>
  <li>It used the code in your file to tell the webserver how to respond to a certain type of request.</li>
  <li>The webserver sat on your computer, waiting for you to send it a request from your browser.</li>
</ol>

<p>Right now, you don’t really need to understand how all this works. You just need to be able to understand the general overview and how to change certain bits.</p>

<p>We’re now going to change part of the app, so that the webserver says something different.</p>

<p>There are two steps to this:</p>

<ol>
  <li>Make a change in <code>app.rb</code>.</li>
  <li>Restart the server, so it knows about the change you made. To do this, you need to first kill the server, using <code>Ctrl-c</code> in the terminal, and then restart it using <code>ruby app.rb</code>.</li>
</ol>

<div class="exercise alert alert-info">
  <p><strong>Task:</strong> 
1. Run the app. In the <code>sinatra_c3s1</code> directory:</p>

  <pre><code>    $ ruby app.rb

 Check you can see the page in your webbrowser at [localhost:4567](http://localhost:4567). 2. Make a change to `app.rb` so that it instead says "Hello there!". Check you can see the change in your browser (you will have to stop the server with `Crtl-C` then restart it again with `ruby app.rb`). 3. Try visiting a different url (e.g. [localhost:4567/about](http://localhost:4567/about)). What happens? 4. (Extension for those who finish early.) Have a look in the file `test1.rb`. What do you think the `test_default` at the end of the file does? Try running the test file from the command line:

    $ ruby test1.rb

If the test passes, change the code back to see what happens when it fails. If it fails, try and make it pass!
</code></pre>

</div>

	</div>

	
	<div class="tab-pane " id="6_basic_app.md">
	

		<h2>Basic app</h2>
		<h3 id="taking-parameters-from-the-url">Taking parameters from the url</h3>

<p>Take a look at the following code:</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="c1"># in app.rb:</span>

<span class="nb">require</span> <span class="s1">&#39;sinatra&#39;</span>

<span class="n">get</span> <span class="s1">&#39;/&#39;</span> <span class="k">do</span>
    <span class="s2">&quot;hello&quot;</span>
<span class="k">end</span>

<span class="n">get</span> <span class="s1">&#39;/:name&#39;</span> <span class="k">do</span>
    <span class="nb">name</span> <span class="o">=</span> <span class="n">params</span><span class="o">[</span><span class="ss">:name</span><span class="o">]</span>
    <span class="nb">name</span>
<span class="k">end</span></code></pre></div>

<p>The <code>/:name</code> is a URL matcher. It will match <code>/</code> followed by any word, for example <code>/tom</code>, <code>/gertrude</code> or <code>/this_isnt_a_name</code>. Sinatra will make this value available in something called the ‘params hash’. You don’t need to worry about this at the moment. The first line of the block, pulls the value out of the params hash and sets it to the local variable <code>name</code>.</p>

<div class="exercise alert alert-info">
  <p><strong>Task:</strong> 
1. Open <code>app.rb</code> in Sublime text and uncomment the code at the bottom.
2. Change it so that visiting <a href="http://localhost:4567/tom">localhost:4567/tom</a> shows “Hello Tom!” in the browser (and similarly for other names). [You will need to use string interpolation and a string method.]
3. (Extension.) Check your result by running <code>ruby test2.rb</code> in the console.
3. See if you can make it so that <a href="http://localhost:4567/tom/bye">localhost:4567/tom/bye</a> shows “Goodbye Tom” in the browser (and similarly for other names).
4. (Extension - hard.) See if you can write another test in <code>test2.rb</code> to test your result.</p>
</div>


	</div>

	
	<div class="tab-pane " id="7_homework.md">
	

		<h2>Homework</h2>
		<div class="exercise alert alert-info">
  <p><strong>Task:</strong> 
1. Finish the exercises from class.
2. Do the <a href="http://www.codecademy.com/tracks/ruby">Codecademy Ruby track</a> Sections 1 and 2.
3. Get a <a href="https://www.heroku.com/">Heroku</a> account and upload an ssh key (see below).</p>
</div>

<h3 id="about-heroku">About Heroku</h3>

<p><a href="https://www.heroku.com/">Heroku</a> is a cloud-based web hosting solution, specifically designed for hosting web applications. It started out as a Rails host, but has since branched out into other frameworks (e.g. Sinatra, Node.js) and languages (e.g. Java, Python).</p>

<p>They aim to completely manage your apps online infrastructure: you provide them with the code, they set it up and run it online. If you have a lot of users and want to scale your app up, they make it easy to allocate more resources so you can handle the increased traffic (for a price!). </p>

<h3 id="setting-up-an-account">Setting up an account</h3>

<p>Before you deploy your app to heroku you need to create an account.</p>

<div class="exercise alert alert-info">
  <p><strong>Task:</strong> 
1. Sign up for an account at <a href="https://www.heroku.com/">Heroku</a>.
2. After you log in, download and install the heroku toolbelt. (This will allow you to interact with heroku from the command line).</p>
</div>

<h3 id="setting-up-ssh-with-heroku"> Setting up ssh with heroku</h3>

<p>The final part of the set up is to upload your ssh keys to Heroku. You might remember about ssh keys from the initial installation instructions: they’re basically a way of identifying yourself to a server without typing in your password each time.</p>

<p>The heroku toolbelt makes this very easy. On the command line (in any folder) type:</p>

<pre><code>$ heroku keys:add
</code></pre>

<p>You can check it worked by typing:</p>

<pre><code>$ heroku keys
</code></pre>

<p>It should list the ssh key that you just added.</p>

<div class="exercise alert alert-info">
  <p><strong>Task:</strong> 
Upload your ssh key to heroku by running</p>

  <pre><code>$ heroku keys:add
</code></pre>

</div>

	</div>

</div>

</div>




  </div> <!-- /container -->


</body>
</html>
